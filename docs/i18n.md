# i18n Conventions

## Where strings live

- Translation resources are stored in `src/i18n/resources/`.
- Current languages:
  - `src/i18n/resources/en.json`
  - `src/i18n/resources/he.json`
- Use nested keys by feature (`home.*`, `auth.*`, `recipes.*`, `tabs.*`).

## Initialization flow

- i18n bootstraps from `src/i18n/index.ts`.
- `app/_layout.tsx` calls `initializeI18n()` before rendering screens.
- Language preference is loaded from storage via `src/lib/storage/languageStorage.ts`.
- Default language is defined in `src/i18n/languages.ts`.

## Adding a new language

1. Add locale code to `SUPPORTED_LANGUAGES` in `src/i18n/languages.ts`.
2. Add the locale to `RTL_LANGUAGES` if it is RTL.
3. Create `src/i18n/resources/<locale>.json`.
4. Register it in `resources` in `src/i18n/index.ts`.
5. Keep translation keys aligned across all language files.

## RTL/LTR behavior

- RTL is determined by locale in `src/i18n/languages.ts` (`isLanguageRTL`).
- Layout direction is applied using `I18nManager.allowRTL/forceRTL` in `src/i18n/index.ts`.
- If direction changes in development, the app triggers `DevSettings.reload()`.
- In production, a restart warning is logged so the next app launch applies direction safely.

## UI usage guidelines

- Use `useTranslation()` and `t('key')` for all user-facing UI strings.
- Avoid hardcoded user-facing strings in components.
- Keep `app/` routing-only; place i18n logic in `src/`.
- For RTL-safe styles:
  - prefer `paddingStart/paddingEnd` and `marginStart/marginEnd`
  - avoid fixed left/right spacing when not necessary
  - use theme direction helpers for text alignment (for example `textAlignStart` from `useTheme`)
